<?xml version="1.1" encoding="UTF-8" standalone="no"?><flow-definition plugin="workflow-job@1400.v7fd111b_ec82f">
  <actions/>
  <description/>
  <keepDependencies>false</keepDependencies>
  <properties>
    <jenkins.model.BuildDiscarderProperty>
      <strategy class="hudson.tasks.LogRotator">
        <daysToKeep>-1</daysToKeep>
        <numToKeep>10</numToKeep>
        <artifactDaysToKeep>-1</artifactDaysToKeep>
        <artifactNumToKeep>-1</artifactNumToKeep>
      </strategy>
    </jenkins.model.BuildDiscarderProperty>
    
  </properties>
  <definition class="org.jenkinsci.plugins.workflow.cps.CpsFlowDefinition" plugin="workflow-cps@4000.v5198556e9cea_">
    <script>

                node {
                    try {
                        stage('Checkout') {
                            checkout([$class: 'GitSCM',
                                branches: [[name: "main"]],
                                doGenerateSubmoduleConfigurations: false,
                                extensions: [],
                                userRemoteConfigs: [[
                                    url: 'https://github.com/kayyazka/idsys'
                                ]]
                            ])
                        }

                        stage('Build  Docker Image') {
                            sh """
                            docker build -t kayyazka/laravel:latest -f $WORKSPACE/Dockerize/Laravel/hello-world/Dockerfile  $WORKSPACE/Dockerize/Laravel/hello-world/
                            """
                        }


                        stage('Unit Test') {
                                sh """
                                # docker run --rm kayyazka/laravel:latest ./vendor/bin/phpunit
                                # docker run --rm kayyazka/laravel:latest php artisan test
                                """
                            }



                        stage('Push Docker Image') {
                                sh """
                                #docker push kayyazka/laravel:latest
                                """
                            }



                        stage('Run Docker Container') {
                                sh """
                                #docker run -d --name laravel-app-test -p 8000:80 kayyazka/laravel:latest
                                """
                            }


                    } catch (e) {
                        currentBuild.result = "FAILED"
                        throw e
                    }
                }



</script>
    <sandbox>true</sandbox>
  </definition>
  <triggers/>
  <disabled>false</disabled>
</flow-definition>